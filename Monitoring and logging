import logging
import time
import random

logging.basicConfig(
    filename='app.log',
    level=logging.DEBUG,
    format='%(asctime)s - %(levelname)s - %(message)s'
)

def monitor_system():
    while True:
        cpu_usage = random.uniform(0, 100) 
        memory_usage = random.uniform(0, 100)  

        logging.info(f"CPU Usage: {cpu_usage:.2f}%")
        logging.info(f"Memory Usage: {memory_usage:.2f}%")

        if cpu_usage > 80:
            logging.warning("High CPU usage detected!")

        if memory_usage > 80:
            logging.warning("High memory usage detected!")

        if random.random() < 0.1: 
            logging.error("Simulated error occurred!")

        time.sleep(5)  

if __name__ == "__main__":
    try:
        monitor_system()
    except KeyboardInterrupt:
        logging.info("Monitoring stopped by user.")
